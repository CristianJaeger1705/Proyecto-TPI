{% extends "base.html" %}
{% block content %}

<div class="container-fluid">
    <div class="row">

        <!-- SIDEBAR -->
        <div class="col-md-3 col-lg-2 mb-4">
            <div class="list-group shadow-sm">

                <a href="{% url 'adminpanel:dashboard_admin' %}" class="list-group-item d-flex align-items-center gap-2 py-2">
                    <i class="bi bi-speedometer2"></i>
                    <span>Dashboard</span>
                </a>

                <a href="{% url 'adminpanel:listar_solicitudes' %}" class="list-group-item d-flex align-items-center gap-2 py-2">
                    <i class="bi bi-building-add"></i>
                    <span>Solicitudes de Empresa</span>
                </a>

                <a href="{% url 'pagina_principal' %}" class="list-group-item d-flex align-items-center gap-2 py-2">
                    <i class="bi bi-chat-square-quote"></i>
                    <span>Reseñas</span>
                </a>

                <a href="{% url 'adminpanel:listar_candidatos' %}" class="list-group-item py-2">
                    <i class="bi bi-people-fill me-2"></i> Candidatos
                </a>

                <a href="{% url 'adminpanel:listar_empresas' %}" class="list-group-item py-2 active">
                    <i class="bi bi-building me-2"></i> Empresas
                </a>

            </div>
        </div>

        <!-- CONTENIDO PRINCIPAL -->
        <div class="col-md-9 col-lg-10">

            <h1 class="mb-3">Empresas Registradas</h1>

            <table class="table table-striped table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>Nombre de Empresa</th>
                        <th>Email</th>
                        <th>Activo</th>
                        <th>Verificado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>

                <tbody>
                {% for u in usuarios %}
                <tr>
                    <td>{{ u.first_name }}</td>
                    <td>{{ u.email }}</td>

                    <!-- ACTIVO -->
                    <td class="text-center">
                        {% if u.is_active %}
                            <i class="bi bi-check-circle-fill text-success"></i>
                        {% else %}
                            <i class="bi bi-x-circle-fill text-danger"></i>
                        {% endif %}
                    </td>

                    <!-- VERIFICACIÓN -->
                    <td class="text-center">
                        {% if u.verificado %}
                            <i class="bi bi-patch-check-fill text-success"></i>
                        {% else %}
                            <i class="bi bi-x-circle text-danger"></i>
                        {% endif %}
                    </td>

                    <!-- ACCIONES -->
                    <td class="text-center">

                        <!-- Ver -->
                        <a href="{% url 'adminpanel:usuario_detalle' u.id %}" class="btn btn-sm btn-primary" title="Ver">
                            <i class="bi bi-eye"></i>
                        </a>

                        <!-- Activar / Desactivar -->
                        {% if u.is_active %}
                            <a href="{% url 'adminpanel:desactivar_usuario' u.id %}?next={{ request.path }}"
                               class="btn btn-sm btn-secondary" title="Desactivar">
                               <i class="bi bi-toggle-off"></i>
                            </a>
                        {% else %}
                            <a href="{% url 'adminpanel:activar_usuario' u.id %}?next={{ request.path }}"
                               class="btn btn-sm btn-success" title="Activar">
                               <i class="bi bi-toggle-on"></i>
                            </a>
                        {% endif %}

                        <!-- Verificar / Quitar verificación -->
                        {% if u.verificado %}
                            <a href="{% url 'adminpanel:quitar_verificacion_usuario' u.id %}?next={{ request.path }}"
                               class="btn btn-sm btn-info" title="Quitar verificación">
                                <i class="bi bi-patch-check-fill"></i>
                            </a>
                        {% else %}
                            <a href="{% url 'adminpanel:verificar_usuario' u.id %}?next={{ request.path }}"
                               class="btn btn-sm btn-primary" title="Verificar">
                                <i class="bi bi-patch-check"></i>
                            </a>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
                </tbody>

            </table>

        </div>

    </div>
</div>

{% endblock %}
