{% if total_favoritos > 0 or user.is_authenticated and user.rol == 'candidato' %}
<div class="p-3 border-bottom bg-light {% if mobile %}mb-3{% endif %}" 
     id="favoritos-block-{% if mobile %}mobile{% else %}desktop{% endif %}"
     data-favoritos-block
     data-block-type="{% if mobile %}mobile{% else %}desktop{% endif %}"
     data-initial-count="{{ total_favoritos }}">
    
    <a href="{% if user.is_authenticated and user.rol == 'candidato' %}{% url 'ofertas:mis_favoritos' %}{% else %}#{% endif %}"
        class="d-flex justify-content-between align-items-center text-decoration-none text-dark fw-bold"
        id="favoritos-link-{% if mobile %}mobile{% else %}desktop{% endif %}" 
        {% if not user.is_authenticated or user.rol != 'candidato' %}
            onclick="handleFavoritosClick(event)"
        {% endif %}
        data-user-role="{% if user.rol == 'candidato' %}candidato{% else %}otro{% endif %}"
        data-is-authenticated="{% if user.is_authenticated %}true{% else %}false{% endif %}">
        
        <span><i class="bi bi-heart-fill text-warning me-2"></i> Mis favoritos</span>
        
        <span id="favoritos-badge-{% if mobile %}mobile{% else %}desktop{% endif %}" 
              class="badge {% if total_favoritos > 0 %}bg-success{% else %}bg-danger{% endif %} rounded-pill {% if total_favoritos == 0 %}d-none{% endif %}"
              data-badge-type="{% if mobile %}mobile{% else %}desktop{% endif %}">
            {{ total_favoritos }}
        </span>
    </a>
</div>
{% endif %}
